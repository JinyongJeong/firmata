////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2013-2017 Dimitry Ishenko
// Contact: dimitry (dot) ishenko (at) (gee) mail (dot) com
//
// Distributed under the GNU GPL v3.
// For full terms see COPYING or visit https://www.gnu.org/licenses/gpl.html

////////////////////////////////////////////////////////////////////////////////
#ifndef FIRMATA_COMMAND_HPP
#define FIRMATA_COMMAND_HPP

////////////////////////////////////////////////////////////////////////////////
#include "firmata/io.hpp"
#include "firmata/pin.hpp"
#include "firmata/types.hpp"

////////////////////////////////////////////////////////////////////////////////
namespace firmata
{

////////////////////////////////////////////////////////////////////////////////
class command
{
public:
    ////////////////////
    explicit command(io::base* io) : io_(io) { }

    ////////////////////
    protocol query_version();
    firmware query_firmware();

    pins query_capability();
    void query_analog_mapping(pins&);
    void query_state(pins&);

    void reset();

private:
    ////////////////////
    io::base* io_;

    // get specific reply discarding others
    payload read_until(msg_id);
};

////////////////////////////////////////////////////////////////////////////////
}

////////////////////////////////////////////////////////////////////////////////
#endif
